---
layout: post
title: 编写高质量代码－改善python的91个建议-基本语法-笔记
category: 学习,python
keywords: 学习,2015
---

# 编写高质量代码－改善python的91个建议-基本语法

+ 有节制地使用from XXX import *
+ 优先使用absolute import.
+ 区分可变对象和不可变对象.
+ 区分staticmethod和classmethod的适用场景.
+ 记住函数传参不是传值也不是传引用
+ 注意finally的陷阱
+ 理解None,正确判断对象是否为空


## 区分可变对象和不可变对象

根据其值是否要变可以区分可变对象和不可变对象.
也可通过内建函数id来查出.

如 字符串是不可变对象

```

s = 'hello'
s[2] = 'a'
TypeError: 'str' object does not support item assignment

import array
a = array.array('c', s)
a[2] = 'a'
a.tostring()

```

*小结*

这种错，系统能检查出来。

### 区分staticmethod和classmethod的适用场景.

staticmethod和classmethod的区别是classmethod多传入了一个cls,
这就是这个方法要对cls的属性进行一定的操作,
一般要类的继承和属性时，就可能用到

例子:

```

class Fruit(object):
    total = 0
    @classmethod
    def print_total(cls)：
        print cls.total

    @classmethod
    def set(cls, value):
        cls.total = value

class Apple(Fruit):
    pass

class Orange(Fruit):
    pass

a = Apple()
a.set(200)
b = Orange()
b.set(300)

a.print_total()
b.print_total()

#　启发
@classmethod
def Init_Product(cls, product_info):
    area, category, batch = map(int, product_info)
    fruit = cls(area, category, batch)
    return fruit

```

## 记住函数传参不是传值也不是传引用

正确叫法是传对象,对象一旦建立，不能取代为其他对象,只能修改对象的属性。


## 注意finally的陷阱
把return break 放在finally会出现错误


## 理解None,　正确判断对象为空.
根据python 默认为空的做法,空列表,空字符串,空字典,空元组,任何数值类型为０.
在此不使用len来判断,是因为这样兼容性不太好.

*注意*
空不等于为None


例子:

```
lst = []

if lst is None:
    print "never exec this!"

#　正确的做法

lst = []

if not lst:
    print 'lst is empty'


```

# 参考

编写高质量代码-发送python91的建议.
